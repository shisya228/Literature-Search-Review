{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.local/contracts/review.schema.json",
  "title": "LiteratureReview",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "topic",
    "mode",
    "title",
    "abstract",
    "sections",
    "references"
  ],
  "properties": {
    "topic": {
      "type": "string",
      "minLength": 1
    },
    "mode": {
      "type": "string",
      "enum": ["theme", "timeline", "debate_map"],
      "description": "v0 can implement only 'theme' but keep enum for future"
    },
    "title": {
      "type": "string",
      "minLength": 1
    },
    "abstract": {
      "type": "string",
      "minLength": 1,
      "description": "Short overview of the review"
    },
    "sections": {
      "type": "array",
      "minItems": 3,
      "maxItems": 10,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["heading", "content_markdown", "paper_ids"],
        "properties": {
          "heading": { "type": "string", "minLength": 1 },
          "content_markdown": {
            "type": "string",
            "minLength": 1,
            "description": "Section body in markdown"
          },
          "paper_ids": {
            "type": "array",
            "minItems": 1,
            "maxItems": 200,
            "items": { "type": "string", "minLength": 1 },
            "description": "Papers used in this section, for traceability"
          }
        }
      }
    },
    "references": {
      "type": "array",
      "minItems": 1,
      "maxItems": 500,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["paper_id", "citation_text"],
        "properties": {
          "paper_id": { "type": "string", "minLength": 1 },
          "citation_text": {
            "type": "string",
            "minLength": 1,
            "description": "Best-effort citation string (v0 doesn't need perfect style)"
          },
          "url": {
            "type": ["string", "null"],
            "description": "Optional landing page"
          }
        }
      }
    }
  }
}
